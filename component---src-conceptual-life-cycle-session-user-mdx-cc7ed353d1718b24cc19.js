(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Nfc0:function(e,t,s){"use strict";s.r(t),s.d(t,"_frontmatter",(function(){return a})),s.d(t,"default",(function(){return p}));s("5hJT"),s("W1QL"),s("K/PF"),s("t91x"),s("75LO"),s("PJhk"),s("mXGw");var n=s("/FXl"),o=s("TjRS"),i=s("+8zC");s("NRsk"),s("aD51");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var a={};void 0!==a&&a&&a===Object(a)&&Object.isExtensible(a)&&!a.hasOwnProperty("__filemeta")&&Object.defineProperty(a,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/conceptual/life-cycle-session-user.mdx"}});var c={_frontmatter:a},l=o.a;function p(e){var t=e.components,s=function(e,t){if(null==e)return{};var s,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(o[s]=e[s]);return o}(e,["components"]);return Object(n.b)(l,r({},c,s,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"life-cycle-session-user"},"Life Cycle, Session, User"),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"This section covers the way Smartlook automatically follows app lifecycle, and introduces the concept of recording sessions and users.")),Object(n.b)("p",null,"Apart from the initial Smartlook setup when a new instance of an app starts, Smartlook follows the life-cycle of the app automatically. When the app is suspended to the background, recording is paused automatically. When the app resumes to the frontend again, so resumes the recording. There is no need to call  API methods to achieve this basic behaviour."),Object(n.b)("h2",{id:"session"},"Session"),Object(n.b)("p",null,"Sessions roughly correspond to individual app “runs”."),Object(n.b)("p",null,"This does not mean, however, that each interval when the app is on screen is always recorded as a separate session. When an app is suspended to the background just for a short period of time (e.g., it is interrupted by an incoming call, notification), the original session continues when the app is resumed. When the app is closed for several minutes, a new session starts on the next app opening."),Object(n.b)("p",null,"To change this default behaviour, an API method that resets the session must be called when appropriate, as described later in this document."),Object(n.b)("h2",{id:"user"},"User"),Object(n.b)("p",null,"Smartlook records user interactions with the app in sessions. "),Object(n.b)("p",null,"Every session has a single user. A user can have more sessions."),Object(n.b)("p",null,"You can uniquely identify the user across by associating an unique identifier with it by calling:"),Object(n.b)(i.a,{kind:"example",mdxType:"Alert"},Object(n.b)(i.c,{snippets:{android:{java:"\n      ",kotlin:"\n      "},ios:{swift:"\nSmartlook.setUserIdentifier(someInternalUserID)\n      ","objective-c":"\n[Smartlook setUserIdentifier:someInternalUserID];\n      "}},mdxType:"CodeBlock"})),Object(n.b)("p",null,"This call associates the current user with the provided id. If a user with such an id already exists in one of your Smartlook projects, the session is automatically assigned to him."),Object(n.b)(i.a,{kind:"important",mdxType:"Alert"},"When you call this method again with a different user identifier, it does not create a new user, it changes the id of the user currently associated with the session. To “login” a new user, use the resetSession method described in the following section."),Object(n.b)("p",null,"The app remembers the last user id and reuses it as the default user id with each new session (i.e., when the app is launched again on the device). This happens even when you do not identify the user explicitly. This  implicit user also ensures that the app runs on the same device are by default associated together."),Object(n.b)(i.d,{to:"/api_reference#user-identification",mdxType:"Link"},"API Reference"),Object(n.b)("h2",{id:"explicit-control-of-sessions-and-users"},"Explicit Control of Sessions and Users"),Object(n.b)("p",null,"In some use cases, e.g. an app that will typically run on a tablet shared among colleagues, it makes sense to explicitly control the session and users flow."),Object(n.b)("p",null,"When the app should always start with a fresh session (or user), use one of the following setup option:"),Object(n.b)(i.a,{kind:"example",mdxType:"Alert"},Object(n.b)(i.c,{snippets:{ios:{swift:'\n// to always setup with new session\nSmartlook.setup(key: "YOUR_API_KEY", \n                options: [.startNewSession: true])\n\n// to start with new session and user\nSmartlook.setup(key: "YOUR_API_KEY", \n                options: [.startNewSessionAndUser: true])\n',"objective-c":'\n// to always setup with new session\n[Smartlook setupWithKey:@""YOUR_API_KEY"" \n                options:@{\n                     SLSetupOptionStartNewSessionKey: @YES\n                }];\n\n// to setup with new session and user\n[Smartlook setupWithKey:@""YOUR_API_KEY"" \n                options:@{\n                     SLSetupOptionStartNewSessionAndResetUserKey: @YES\n                }];\n      '}},mdxType:"CodeBlock"})),Object(n.b)("p",null,"When it is desired to start a new session, or login a new user while the app is running, force it by using the following method. The ",Object(n.b)("inlineCode",{parentName:"p"},"resetUser")," attribute indicates, whether the user identity should be also reset, or whether the new session should retain the user from the current session."),Object(n.b)(i.c,{snippets:{android:{java:"\n      ",kotlin:"\n      "},ios:{swift:"\nclass func resetSession(resetUser: Bool)\n      ","objective-c":"\n+ (void)resetSessionAndUser:(BOOL)resetUser;\n      "}},mdxType:"CodeBlock"}),Object(n.b)(i.a,{kind:"important",mdxType:"Alert"},"It is not recommended to call this method when the app gets to background. Smartlook is busy with cleaning up when the app is going to background, and calling this method may create ephemeral sessions as an unwanted consequence. When you wish that sessions in no case continue with the next app launch, use the setup resetSession options when initializing Smartlook instead."),Object(n.b)("h2",{id:"explicit-recording-stopping-and-starting"},"Explicit Recording Stopping and Starting"),Object(n.b)(i.a,{kind:"important",mdxType:"Alert"},"**Smartlook follows the app life-cycle automatically** and it is not necessary, under normal circumstances, to stop and restart recording programmatically."),Object(n.b)("p",null,"However, for the use-cases when you e.g., want recording just a small part of your application, it is still possible to stop and start recording programmatically. To control and check whether Smartlook is active in your app, use th following methods:"),Object(n.b)(i.c,{snippets:{android:{java:"\n      ",kotlin:"\n      "},ios:{swift:"\nclass func startRecording()\nclass func stopRecording()\nclass func isRecording() -> Bool\n      ","objective-c":"\n+ (void)startRecording;\n+ (void)stopRecording;\n+ (BOOL)isRecording;\n      "}},mdxType:"CodeBlock"}),Object(n.b)(i.d,{to:"/api_reference#start-and-stop-recording",mdxType:"Link"},"API reference"),Object(n.b)(i.a,{kind:"note",mdxType:"Alert"},"When you control recording programmatically, the time the user spent in the rest of the app is not visible on the timeline. Thus, for just a short recording interruption (e.g., when use fills in some form full of sensitive data), consider switching to some combination of rendering and event tracking modes. This way, you will see the time the user spent incognito on the timeline. More about it in ",Object(n.b)(i.d,{to:"/conceptual/handling-sensitive-data",mdxType:"Link"},"Handling Sensitive Data"),"."),Object(n.b)("h2",{id:"session-and-user-properties"},"Session and User properties"),Object(n.b)("p",null,"In many cases, it is convenient to associate some custom properties to the current session or app user. Smartlook offers a set of straigthforward methods to do it. "),Object(n.b)(i.a,{kind:"note",mdxType:"Alert"},"Currently, only string values are accepted both as property keys and values."),Object(n.b)("h3",{id:"user-properties"},"User Properties"),Object(n.b)("p",null,"User properties are set to the user and do not change across sessions."),Object(n.b)(i.a,{kind:"example",mdxType:"Alert"},Object(n.b)(i.c,{snippets:{android:{java:"\n      ",kotlin:"\n      "},ios:{swift:'\nSmartlook.setUserIdentifier(someInternalUserID, ["ZIP" : userZIP])\n...\nSmartlook.setSessionProperty(value: userZIPCode, forName: "ZIP")\n      ',"objective-c":'\n[Smartlook setUserIdentifier:someInternalUserID withProperties:@{ @"ZIP" : userZIPCode }];\n...\n[Smartlook setUserPropertyValue:someZIPCode forName:@"ZIP"];\n      '}},mdxType:"CodeBlock"})),Object(n.b)(i.d,{to:"/api_reference#user-properties",mdxType:"Link"},"API Reference"),Object(n.b)("h3",{id:"session-properties"},"Session Properties"),Object(n.b)("p",null,'User properties are set to the current session and are not copied to the next session (where session roughly corresponds to "an app run", as described above).'),Object(n.b)(i.a,{kind:"example",mdxType:"Alert"},Object(n.b)(i.c,{snippets:{android:{java:"\n      ",kotlin:"\n      "},ios:{swift:'\nSmartlook.setSessionProperty(value: "\\(topAchievedLevel)", forName: "TOP_LEVEL")\n      ',"objective-c":'\n[Smartlook setSessionPropertyValue:[NSString stringWithFormat:@"%d", topAchievedLevel] forName:@"TOP_LEVEL"];\n      '}},mdxType:"CodeBlock"})),Object(n.b)(i.d,{to:"/api_reference#session-properties",mdxType:"Link"},"API Reference"))}void 0!==p&&p&&p===Object(p)&&Object.isExtensible(p)&&!p.hasOwnProperty("__filemeta")&&Object.defineProperty(p,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/conceptual/life-cycle-session-user.mdx"}}),p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-conceptual-life-cycle-session-user-mdx-cc7ed353d1718b24cc19.js.map